pre-push:
  only: # run only if there were non-docs changes
    - run: test "$(git diff --name-only HEAD^ | grep -v '^docs/')"
  commands:
    test:
      run: npm run test
pre-commit:
  commands:
    or-docs-or-non-docs: # forbid to commit both docs and non-docs files in the same commit
      run: test -z "$(git diff --name-only HEAD | grep '^docs/')" -o -z "$(git diff --name-only HEAD | grep -v '^docs/')"
    lint:
      run: npm run lint:ci
